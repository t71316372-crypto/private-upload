<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <h1>★テスト：この index.html が表示されています</h1>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: system-ui, "Hiragino Sans", sans-serif;
      max-width: 720px;
      margin: 0 auto;
      padding: 16px;
      background: #f7f7f7;
    }
    h1 {
      font-size: 1.4rem;
      text-align: center;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }
    .row {
      margin-bottom: 12px;
    }
    button {
      padding: 8px 16px;
      border-radius: 999px;
      border: none;
      background: #2563eb;
      color: #fff;
      font-size: 0.95rem;
      cursor: pointer;
    }
    button:disabled {
      opacity: 0.6;
    }
  </style>
</head>

<body>

<h1>私たち二人だけのアップローダー</h1>

<div class="card">
  <div class="row">
    <input type="file" id="fileInput">
  </div>

  <div class="row">
    <button id="uploadBtn">アップロード</button>
    <span id="status" style="margin-left:8px;font-size:0.9rem;"></span>
  </div>
</div>

<script>
  const fileInput = document.getElementById("fileInput");
  const uploadBtn = document.getElementById("uploadBtn");
  const statusEl = document.getElementById("status");

  // ★ あなたの Edge Function URL
  const FUNCTION_URL =
    "https://erdwkchgsewnzkyriypx.supabase.co/functions/v1/clever-responder";

  uploadBtn.onclick = async () => {
    const file = fileInput.files[0];
    if (!file) {
      statusEl.textContent = "ファイルを選んでください";
      return;
    }

    statusEl.textContent = "アップロード中…";
    uploadBtn.disabled = true;

    const formData = new FormData();
    formData.append("file", file);

    const res = await fetch(FUNCTION_URL, {
      method: "POST",
      body: formData
    });

    uploadBtn.disabled = false;

    if (!res.ok) {
      const text = await res.text();
      statusEl.textContent = "失敗: " + text;
      return;
    }

    statusEl.textContent = "アップロード成功！";
    fileInput.value = "";
  };
</script>

</body>
</html>

